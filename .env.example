# ============================================
# VARIABLES DE ENTORNO - PROJECT BRAIN
# Plantilla de configuración
# Copiar a .env y modificar según necesidades
# ============================================

# ============================================
# ENTORNO DEL SISTEMA
# ============================================

# Entorno: development, staging, production
BRAIN_ENVIRONMENT=development

# Nivel de logging: DEBUG, INFO, WARNING, ERROR, CRITICAL
BRAIN_LOG_LEVEL=INFO

# Modo debug (solo development)
BRAIN_DEBUG=true

# Directorio de datos
BRAIN_DATA_DIR=./data

# Directorio de logs
BRAIN_LOG_DIR=./logs

# ============================================
# BASE DE DATOS - PostgreSQL
# ============================================

# PostgreSQL
POSTGRES_HOST=localhost
POSTGRES_PORT=5432
POSTGRES_DB=project_brain
POSTGRES_USER=brain_user
POSTGRES_PASSWORD=change_this_strong_password

# PostgreSQL SSL (opcional)
POSTGRES_SSL_MODE=prefer
POSTGRES_SSL_CERT=
POSTGRES_SSL_KEY=
POSTGRES_SSL_ROOT_CERT=

# ============================================
# BASE DE DATOS - Neo4j
# ============================================

# Neo4j
NEO4J_URI=bolt://localhost:7687
NEO4J_USER=neo4j
NEO4J_PASSWORD=change_this_strong_password
NEO4J_DATABASE=project_brain

# Neo4j SSL (opcional)
NEO4J_ENCRYPTED=false
NEO4J_TRUSTED_CERT=

# ============================================
# CACHÉ - Redis
# ============================================

# Redis
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=change_this_strong_password
REDIS_DB=0

# Redis SSL (opcional)
REDIS_SSL=false
REDIS_SSL_CERT_REQS=required
REDIS_SSL_CA_CERTS=

# Redis Sentinel (opcional para clúster)
REDIS_SENTINELS=
REDIS_SENTINEL_MASTER=mymaster
REDIS_SENTINEL_PASSWORD=

# ============================================
# EMBEDDINGS - ChromaDB
# ============================================

# ChromaDB
CHROMA_PERSIST_DIR=./data/embeddings
CHROMA_COLLECTION_NAME=project_knowledge
CHROMA_SIMILARITY_METRIC=cosine
CHROMA_NORMALIZE_EMBEDDINGS=true

# ============================================
# APIs EXTERNAS - LLMs y Servicios
# ============================================

# OpenAI
OPENAI_API_KEY=sk-xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
OPENAI_API_BASE=https://api.openai.com/v1
OPENAI_API_ORG=org-xxxxxxxxxxxxxxxxxxxxxxxx
OPENAI_MODEL=gpt-4-turbo-preview

# Anthropic
ANTHROPIC_API_KEY=sk-ant-xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
ANTHROPIC_MODEL=claude-3-opus-20240229

# Cohere
COHERE_API_KEY=xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx

# Google AI
GOOGLE_AI_API_KEY=xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
GOOGLE_AI_MODEL=gemini-pro

# Hugging Face
HUGGINGFACE_HUB_TOKEN=hf_xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
HUGGINGFACE_INFERENCE_ENDPOINT=

# ============================================
# API DEL SISTEMA
# ============================================

# API REST
API_HOST=0.0.0.0
API_PORT=8000
API_WORKERS=4
API_RELOAD=false

# WebSocket
WS_HOST=0.0.0.0
WS_PORT=8001
WS_PING_INTERVAL=30

# gRPC (opcional)
GRPC_HOST=0.0.0.0
GRPC_PORT=50051
GRPC_MAX_WORKERS=10

# ============================================
# AUTENTICACIÓN Y SEGURIDAD
# ============================================

# JWT
JWT_SECRET=change_this_to_a_very_long_and_random_secret_key_at_least_32_chars
JWT_ALGORITHM=HS256
JWT_EXPIRY_HOURS=24
JWT_REFRESH_EXPIRY_DAYS=7

# API Keys (para clientes)
API_KEY_HEADER=X-API-Key
API_KEY_ROTATION_DAYS=90

# OAuth2 (opcional)
OAUTH2_ENABLED=false

# GitHub OAuth
GITHUB_CLIENT_ID=
GITHUB_CLIENT_SECRET=
GITHUB_REDIRECT_URI=http://localhost:8000/auth/github/callback

# Google OAuth
GOOGLE_CLIENT_ID=
GOOGLE_CLIENT_SECRET=
GOOGLE_REDIRECT_URI=http://localhost:8000/auth/google/callback

# ============================================
# MONITOREO Y MÉTRICAS
# ============================================

# Prometheus
PROMETHEUS_PORT=9090
PROMETHEUS_PATH=/metrics

# OpenTelemetry
OTEL_EXPORTER_OTLP_ENDPOINT=http://localhost:4317
OTEL_SERVICE_NAME=project-brain
OTEL_SERVICE_VERSION=1.0.0
OTEL_TRACES_SAMPLER=parentbased_always_on
OTEL_TRACES_SAMPLER_ARG=1.0

# Jaeger (opcional)
JAEGER_AGENT_HOST=localhost
JAEGER_AGENT_PORT=6831
JAEGER_ENDPOINT=http://localhost:14268/api/traces

# ============================================
# WEBHOOKS Y NOTIFICACIONES
# ============================================

# Webhooks
WEBHOOK_SECRET=change_this_webhook_secret
WEBHOOK_MAX_ATTEMPTS=3
WEBHOOK_RETRY_DELAY=60
WEBHOOK_TIMEOUT=30

# Email (opcional)
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=your-email@gmail.com
SMTP_PASSWORD=your-app-password
SMTP_FROM=noreply@projectbrain.dev
SMTP_TLS=true

# Slack (opcional)
SLACK_WEBHOOK_URL=__SLACK_WEBHOOK_URL__
SLACK_CHANNEL=#project-brain-alerts
SLACK_USERNAME=Project Brain

# ============================================
# LÍMITES Y CONFIGURACIÓN DEL SISTEMA
# ============================================

# Límites de proyecto
MAX_PROJECT_SIZE_MB=1024
MAX_FILE_SIZE_MB=10
MAX_CONCURRENT_ANALYSES=5
MAX_CONCURRENT_QUERIES=100

# Tiempos de espera
ANALYSIS_TIMEOUT_MINUTES=30
QUERY_TIMEOUT_SECONDS=30
API_REQUEST_TIMEOUT=30
DATABASE_TIMEOUT=300

# Caché
CACHE_TTL_SECONDS=3600
CACHE_MAX_SIZE_MB=1024
CACHE_STRATEGY=LRU

# ============================================
# OPTIMIZACIONES Y RENDIMIENTO
# ============================================

# GPU
CUDA_VISIBLE_DEVICES=0
TF_FORCE_GPU_ALLOW_GROWTH=true
TORCH_CUDA_ARCH_LIST=7.0;7.5;8.0;8.6

# Paralelismo
NUM_WORKERS=8
NUM_THREADS=4
OMP_NUM_THREADS=4
MKL_NUM_THREADS=4

# Memory
PYTORCH_CUDA_ALLOC_CONF=max_split_size_mb:128
TF_GPU_MEMORY_GROWTH=true

# ============================================
# DESARROLLO Y DEBUG
# ============================================

# Hot reload (solo desarrollo)
HOT_RELOAD=true
WATCH_DIRS=./src,./config
WATCH_EXTENSIONS=.py,.yaml,.json

# Debug toolbar
DEBUG_TOOLBAR=true
DEBUG_TOOLBAR_PANELS=sqlalchemy,redis,profiling,headers

# Profiling
PROFILING_ENABLED=false
PROFILING_OUTPUT_DIR=./profiles
PROFILING_INTERVAL=0.001

# ============================================
# BACKUP Y RESTAURACIÓN
# ============================================

# Backup
BACKUP_ENABLED=true
BACKUP_SCHEDULE="0 2 * * *"
BACKUP_RETENTION_DAYS=30
BACKUP_LOCATION=./data/backups

# S3 Backup (opcional)
BACKUP_S3_ENABLED=false
BACKUP_S3_BUCKET=project-brain-backups
BACKUP_S3_REGION=us-east-1
BACKUP_S3_ACCESS_KEY=
BACKUP_S3_SECRET_KEY=
BACKUP_S3_ENDPOINT=

# ============================================
# CONFIGURACIONES ESPECÍFICAS POR ENTORNO
# ============================================

# Development override
if [ "$BRAIN_ENVIRONMENT" = "development" ]; then
    BRAIN_DEBUG=true
    API_RELOAD=true
    HOT_RELOAD=true
    POSTGRES_HOST=localhost
    NEO4J_URI=bolt://localhost:7687
    REDIS_HOST=localhost
fi

# Staging override
if [ "$BRAIN_ENVIRONMENT" = "staging" ]; then
    BRAIN_DEBUG=false
    API_RELOAD=false
    HOT_RELOAD=false
    POSTGRES_HOST=staging-db
    NEO4J_URI=bolt://staging-neo4j:7687
    REDIS_HOST=staging-redis
fi

# Production override
if [ "$BRAIN_ENVIRONMENT" = "production" ]; then
    BRAIN_DEBUG=false
    API_RELOAD=false
    HOT_RELOAD=false
    POSTGRES_HOST=production-db
    NEO4J_URI=bolt://production-neo4j:7687
    REDIS_HOST=production-redis
    JWT_SECRET=$(openssl rand -hex 32)
    API_KEY_ROTATION_DAYS=30
    MAX_CONCURRENT_ANALYSES=10
    MAX_CONCURRENT_QUERIES=1000
fi

# ============================================
# VARIABLES DE DEPLOYMENT
# ============================================

# Docker
DOCKER_REGISTRY=ghcr.io
DOCKER_NAMESPACE=project-brain
DOCKER_IMAGE_TAG=latest

# Kubernetes
K8S_NAMESPACE=project-brain
K8S_REPLICAS=3
K8S_CPU_REQUEST=1000m
K8S_CPU_LIMIT=2000m
K8S_MEMORY_REQUEST=2Gi
K8S_MEMORY_LIMIT=4Gi

# Cloud
CLOUD_PROVIDER=aws  # aws, gcp, azure
AWS_REGION=us-east-1
GCP_REGION=us-central1
AZURE_REGION=eastus

# ============================================
# NOTAS IMPORTANTES
# ============================================

# 1. NUNCA comitas el archivo .env real al repositorio
# 2. Usa diferentes secretos para cada entorno
# 3. Rota las contraseñas regularmente
# 4. Usa un administrador de secretos para producción
# 5. Configura backups automáticos
# 6. Monitorea el uso de recursos
# 7. Configura alertas para problemas críticos
# 8. Prueba regularmente la recuperación de desastres

# Para generar un JWT_SECRET seguro:
# openssl rand -hex 32
# o
# python -c "import secrets; print(secrets.token_hex(32))"

# Para generar una contraseña segura:
# openssl rand -base64 32
# o
# python -c "import secrets; print(secrets.token_urlsafe(32))"