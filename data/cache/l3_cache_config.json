{
  "version": "1.0.1",
  "description": "Configuración de caché de nivel 3 (disco)",
  "created_at": "2026-01-29T00:00:00Z",
  "last_updated": "2026-01-29T00:00:00Z",

  "cache_hierarchy": {
    "level": 3,
    "name": "disk_cache",
    "priority": "low",
    "storage_type": "filesystem"
  },

  "storage_config": {
    "base_directory": "./data/cache/l3_disk",
    "sharding": {
      "enabled": true,
      "shard_count": 8,
      "sharding_algorithm": "consistent_hashing",
      "virtual_nodes_per_shard": 32
    },
    "compression": {
      "enabled": true,
      "algorithm": "lz4",
      "fallback_algorithm": "zstd",
      "min_size_bytes": 1024,
      "compression_level": 3
    },
    "encryption": {
      "enabled": false,
      "algorithm": "AES-256-GCM",
      "key_source": "env",
      "key_rotation_days": 90
    }
  },

  "eviction_policy": {
    "algorithm": "TTL_LFU_Hybrid",
    "default_ttl_seconds": 86400,
    "max_size_bytes": 1073741824,
    "max_items": 100000,
    "cleanup_interval_seconds": 3600,
    "execution_order": ["ttl_based", "size_based", "access_based"],
    "eviction_strategies": [
      {
        "name": "ttl_based",
        "priority": 1,
        "threshold_seconds": 86400
      },
      {
        "name": "size_based",
        "priority": 2,
        "threshold_bytes": 1073741824
      },
      {
        "name": "access_based",
        "priority": 3,
        "min_access_count": 1,
        "max_age_without_access_seconds": 604800
      }
    ]
  },

  "performance_settings": {
    "concurrent_access": {
      "max_readers": 100,
      "max_writers": 10,
      "lock_timeout_seconds": 5
    },
    "io_optimization": {
      "read_buffer_size_kb": 64,
      "write_buffer_size_kb": 64,
      "prefetch_enabled": true,
      "prefetch_size_kb": 256
    },
    "memory_mapping": {
      "enabled": true,
      "max_mapped_memory_mb": 512
    }
  },

  "caching_strategies": {
    "by_content_type": {
      "embeddings": {
        "compress": true,
        "ttl_seconds": 86400,
        "max_size_bytes": 104857600,
        "shard_by": "model_type"
      },
      "ast": {
        "compress": true,
        "ttl_seconds": 604800,
        "max_size_bytes": 524288000,
        "shard_by": "language"
      },
      "analysis_results": {
        "compress": true,
        "ttl_seconds": 2592000,
        "max_size_bytes": 1073741824,
        "shard_by": "project_id"
      },
      "query_results": {
        "compress": false,
        "ttl_seconds": 3600,
        "max_size_bytes": 10485760,
        "shard_by": "query_hash"
      }
    }
  },

  "monitoring": {
    "enabled": true,
    "metrics_collection": {
      "interval_seconds": 60,
      "retention_days": 30
    },
    "metrics_to_track": [
      "cache_hit_rate",
      "cache_miss_rate",
      "avg_access_time_ms",
      "eviction_count",
      "storage_usage_bytes",
      "compression_ratio"
    ],
    "logging": {
      "enabled": true,
      "level": "INFO",
      "log_file": "./logs/cache_l3.log",
      "rotation": {
        "max_size_mb": 100,
        "backup_count": 5
      }
    }
  },

  "maintenance": {
    "auto_maintenance": true,
    "tasks": [
      {
        "name": "cleanup_expired",
        "schedule": "0 */6 * * *",
        "enabled": true
      },
      {
        "name": "defragment",
        "schedule": "0 2 * * *",
        "enabled": true
      },
      {
        "name": "validate_integrity",
        "schedule": "0 4 * * 0",
        "enabled": true
      }
    ],
    "backup": {
      "enabled": true,
      "schedule": "0 3 * * *",
      "retention_days": 7,
      "include_metadata": true
    }
  },

  "recovery": {
    "corruption_handling": {
      "auto_detect": true,
      "auto_recover": true,
      "isolation_level": "per_shard",
      "max_corrupted_entries": 100
    },
    "backup_restore": {
      "point_in_time_recovery": true,
      "max_recovery_time_seconds": 300
    }
  }
}
