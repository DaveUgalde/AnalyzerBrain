# ============================================
# CONFIGURACIÓN DEL SISTEMA DE DATOS
# Project Brain
# ============================================

general:
  data_directory: "./data"
  log_directory: "./logs"
  temp_directory: "./data/temp"
  max_concurrent_operations: 10

  retention:
    projects_days: 30
    embeddings_days: 90
    cache_days: 7
    logs_days: 30
    backups_days: 365

  limits:
    max_project_size_mb: 1024
    max_file_size_mb: 10
    max_embeddings_per_project: 100000
    max_cache_size_mb: 1024


projects:
  directory_structure:
    metadata: "metadata.json"
    files: "files.json"
    analysis: "analysis.json"
    entities: "entities/"
    dependencies: "dependencies/"
    issues: "issues/"
    snapshots: "snapshots/"
    raw_files: "raw_files/"

  snapshot_versions: 10
  auto_snapshot: true
  snapshot_on_change: true

  export_formats: ["json", "zip", "tar"]
  default_export_format: "json"


embeddings:
  chromadb:
    persist: true
    persist_directory: "./data/embeddings/chroma"
    collection_name: "project_embeddings"
    similarity_metric: "cosine"

  cache:
    enabled: true
    directory: "./data/embeddings/cache"
    max_size_mb: 500
    ttl_days: 7

  models:
    default_text: "all-MiniLM-L6-v2"
    default_code: "microsoft/codebert-base"

  indices:
    hnsw:
      enabled: true
      M: 16
      ef_construction: 200
      ef_search: 50

    ivf:
      enabled: false
      nlist: 100
      nprobe: 10


graphs:
  export_formats:
    - name: "json"
      extension: ".json"
      description: "JSON estándar"

    - name: "graphml"
      extension: ".graphml"
      description: "GraphML para Gephi/Cytoscape"

    - name: "cypher"
      extension: ".cypher"
      description: "Cypher para Neo4j"

    - name: "dot"
      extension: ".dot"
      description: "DOT para Graphviz"

    - name: "gexf"
      extension: ".gexf"
      description: "GEXF para Gephi"

  retention_days: 30
  max_exports_per_project: 100


cache:
  hierarchy:
    memory:
      enabled: true
      max_size: 1000
      ttl_seconds: 300
      strategy: "LRU"

    redis:
      enabled: false
      host: "localhost"
      port: 6379
      password: null
      db: 0
      ttl_seconds: 3600

    disk:
      enabled: true
      directory: "./data/cache/l3_disk"
      max_size_mb: 1024
      ttl_seconds: 86400
      compression: true

  precomputed:
    ast_cache: true
    embedding_cache: true
    dependency_cache: true

  auto_cleanup:
    enabled: true
    interval_hours: 24
    max_age_days: 7


state:
  database:
    path: "./data/state/state.db"
    backup_interval_hours: 24

  sessions:
    max_sessions: 1000
    session_ttl_hours: 24
    cleanup_interval_hours: 1

  operations:
    max_operations: 10000
    completed_ttl_days: 7
    failed_ttl_days: 30

  events:
    max_events: 10000
    retention_days: 30

  snapshots:
    max_snapshots: 10
    auto_snapshot: true
    snapshot_interval_days: 7


backups:
  enabled: true
  directory: "./data/backups"

  schedule:
    full: "0 2 * * 0"
    incremental: "0 2 * * *"
    verify: "0 3 * * *"

  retention:
    full_backups: 4
    incremental_days: 30
    restore_points: 7

  compression: true

  encryption:
    enabled: false
    key_file: "./data/backups/encryption.key"

  verification:
    enabled: true
    checksum: true
    integrity_check: true

  sources:
    - "projects"
    - "embeddings"
    - "state"
    - "config"


monitoring:
  enabled: true
  interval_seconds: 300

  thresholds:
    disk_usage_percent: 90
    project_growth_mb_per_day: 100
    cache_hit_rate_min: 0.7
    backup_failure_count: 3
    memory_usage_percent: 80
    cpu_usage_percent: 70

  alert_channels:
    - "log"
    - "file"

  retention_days: 30

  dashboard:
    enabled: true
    port: 8080
    refresh_interval_seconds: 10


security:
  encryption:
    at_rest: false
    in_transit: true
    key_rotation_days: 90

  permissions:
    data_directory: "0755"
    config_files: "0644"
    executable_scripts: "0755"
    follow_symlinks: false

  audit:
    enabled: true
    log_file: "./data/audit.log"
    retention_days: 90

  access_control:
    enabled: false
